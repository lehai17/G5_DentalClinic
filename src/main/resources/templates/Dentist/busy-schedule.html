<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Báo cáo lịch bận - DentalPlus</title>
    <link rel="stylesheet" th:href="@{/css/dentist/app.css}"/>
    <link rel="stylesheet" th:href="@{/css/dentist/support.css}"/> <link rel="stylesheet" th:href="@{/css/dentist/busy-schedule.css}"/>
</head>
<body>
<div class="app-shell">

    <aside class="sidebar" id="sidebar" style="display:flex; flex-direction:column; height:100vh;">
        <div class="sidebar-top">
            <div class="brand-mini">
                <div class="brand-badge">D+</div>
                <div style="font-weight:800">DentalPlus</div>
            </div>
        </div>

        <nav class="nav">
            <a class="nav-item" href="/dentist/dashboard">Dashboard</a>
            <a class="nav-item" href="/dentist/work-schedule">Work Schedule</a>
            <a class="nav-item active" href="/dentist/busy-schedule">Busy Schedule</a>
            <a class="nav-item" href="/dentist/support">Support Ticket</a>
            <a class="nav-item" href="/dentist/profile">Profile</a>
        </nav>

        <div style="margin-top:auto;">
            <a class="nav-item danger" href="/logout">Sign Out</a>
        </div>
    </aside>

    <div class="main">
        <div class="topbar">
            <div style="color:var(--muted); font-size:12px;">Modules › Work Schedule › Report Busy</div>
        </div>

        <div class="content">
            <div class="busy-container">
                <div class="busy-header">
                    <h2>Đăng ký lịch bận / Nghỉ phép</h2>
                    <p>Hệ thống sẽ tự động thông báo và hỗ trợ hủy/đổi lịch cho bệnh nhân bị ảnh hưởng.</p>
                </div>

                <form th:action="@{/dentist/busy-schedule/submit}" method="post" class="busy-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Từ ngày</label>
                            <input type="date" name="startDate" id="startDate" required
                                   th:min="${#temporals.format(#temporals.createNow(), 'yyyy-MM-dd')}">
                        </div>
                        <div class="form-group">
                            <label>Đến hết ngày</label>
                            <input type="date" name="endDate" id="endDate" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Lý do nghỉ (Gửi cho quản lý & Bệnh nhân)</label>
                        <textarea name="reason" rows="4"
                                  placeholder="Ví dụ: Tôi có lịch công tác đột xuất tại Hà Nội..." required></textarea>
                    </div>

                    <div class="form-actions">
                        <a href="/dentist/work-schedule" class="btn-secondary">Hủy bỏ</a>
                        <button type="submit" class="btn-primary">Xác nhận báo nghỉ</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('startDate').addEventListener('change', function() {
        const endDate = document.getElementById('endDate');
        if (!endDate.value) {
            endDate.value = this.value;
        }
        endDate.min = this.value;
    });
</script>

</body>
</html>