<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<body>
<nav th:fragment="header" class="navbar">
    <div class="navbar-container">
        <div class="navbar-logo">
            <a th:href="@{/homepage}"><span>Nha Khoa ABC</span></a>
        </div>

        <ul class="navbar-menu">
            <li><a onclick="scrollToSection('services')">Dịch Vụ</a></li>
            <li><a onclick="scrollToSection('dentists')">Bác Sĩ</a></li>
            <li><a th:href="@{/blogs}">Blog</a></li>
            <li><a href="#contact">Liên Hệ</a></li>
        </ul>

        <div class="navbar-actions" style="display:flex; align-items:center; gap:10px;">

            <!-- CHƯA LOGIN: hiện Đăng nhập / Đăng ký -->
            <div sec:authorize="isAnonymous()" style="display:flex; gap:10px;">
                <a th:href="@{/login}" class="navbar-cta" style="text-decoration:none;">Đăng nhập</a>
                <a th:href="@{/register}" class="navbar-cta" style="text-decoration:none;">Đăng ký</a>
            </div>

            <!-- ĐÃ LOGIN: hiện avatar -->
            <div sec:authorize="isAuthenticated()" class="user-menu">
                <button type="button" class="avatar-btn" onclick="toggleUserMenu(event)">
                    <!-- hiển thị chữ cái đầu của email/username -->
                    <span th:text="${#strings.substring(#authentication.name,0,1)}">A</span>
                </button>

                <div id="userDropdown" class="dropdown hidden">
                    <a class="dropdown-item" th:href="@{/profile}">Profile</a>
                    <a class="dropdown-item" th:href="@{/change-password}">Change Password</a>

                    <div class="dropdown-divider"></div>

                    <form th:action="@{/logout}" method="post" style="margin:0;">
                        <button type="submit" class="dropdown-item danger">Logout</button>
                    </form>
                </div>
            </div>



            <a th:href="@{/appointments/book}" class="navbar-cta" style="text-decoration:none;">
                Đặt Lịch Ngay
            </a>

        </div>

    </div>
</nav>
</body>
</html>